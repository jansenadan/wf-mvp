<!DOCTYPE html>
<html>
<head>
	<title>Item Page | Wellfitting Bras</title>
	<link rel="icon" type="image/png" href="favicon.png">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
var bands = [
		    	{
		    		value: 28, 
		    		start: 22.8, 
		    		stop: 24.8,
		    		cups: [
		    			{value: 'b', start: 29.1},
			    		{value: 'c', start: 29.9},
			    		{value: 'd', start: 30.7},
		    			{value: 'e', start: 31.5},
		    			{value: 'f', start: 32.3},
		    			{value: 'g', start: 33.1},
		    			{value: 'h', start: 33.9},
		    			{value: 'hh', start: 34.6},
		    			{value: 'j', start: 35.4},
		    			{value: 'k', start: 36.2},
		    			{value: 'l', start: 37},
		    			{value: 'm', start: 37.8},
		    			{value: 'n', start: 38.6, stop: 39.4}
			    	]
		    	},
		    	{
		    		value: 30,
		    		start: 24.8,
		    		stop: 26.8,
		    		cups: [
		    			{value: 'b', start: 31.1},
		    			{value: 'c', start: 31.9},
		    			{value: 'd', start: 32.7},
		    			{value: 'e', start: 33.5},
		    			{value: 'f', start: 34.3},
		    			{value: 'g', start: 35},
		    			{value: 'h', start: 35.8},
		    			{value: 'hh', start: 36.6},
		    			{value: 'j', start: 37.4},
		    			{value: 'k', start: 38.2},
		    			{value: 'l', start: 39},
		    			{value: 'm', start: 39.8, stop: 40.6}
		    		]
		    	},
		    	{
		    		value: 32,
		    		start: 26.8,
		    		stop: 28.7,
		    		cups: [
		    			{value: 'b', start: 33.1},
		    			{value: 'c', start: 33.9},
		    			{value: 'd', start: 34.6},
		    			{value: 'e', start: 35.4},
		    			{value: 'f', start: 36.2},
		    			{value: 'g', start: 37},
		    			{value: 'h', start: 37.8},
		    			{value: 'hh', start: 38.6},
		    			{value: 'j', start: 39.4},
		    			{value: 'k', start: 40.2},
		    			{value: 'l', start: 40.9, stop: 41.7}
		    		]
		    	},
		    	{
		    		value: 34,
		    		start: 28.7,
		    		stop: 30.7,
		    		cups: [
		    			{value: 'b', start: 34.6},
		    			{value: 'c', start: 35.8},
		    			{value: 'd', start: 36.6},
		    			{value: 'e', start: 37.4},
		    			{value: 'f', start: 38.2},
		    			{value: 'g', start: 39},
		    			{value: 'h', start: 39.8},
		    			{value: 'hh', start: 40.6},
		    			{value: 'j', start: 41.3},
		    			{value: 'k', start: 42.1, stop: 42.9}
		    		]
		    	},
		    	{
		    		value: 36,
		    		start: 30.7,
		    		stop: 32.7,
		    		cups: [
		    			{value: 'b', start: 37},
		    			{value: 'c', start: 37.8},
		    			{value: 'd', start: 38.6},
		    			{value: 'e', start: 39.4},
		    			{value: 'f', start: 40.2},
		    			{value: 'g', start: 40.9},
		    			{value: 'h', start: 41.7},
		    			{value: 'hh', start: 42.5},
		    			{value: 'j', start: 43.3, stop: 44.1}
		    		]
		    	},
		    	{
		    		value: 38,
		    		start: 32.7,
		    		stop: 34.6,
		    		cups: [
		    			{value: 'b', start: 39},
		    			{value: 'c', start: 39.8},
		    			{value: 'd', start: 40.6},
		    			{value: 'e', start: 41.3},
		    			{value: 'f', start: 42.1},
		    			{value: 'g', start: 42.9},
		    			{value: 'h', start: 43.7},
		    			{value: 'hh', start: 44.5, stop: 45.3}
		    		]
		    	},
		    	{
		    		value: 40,
		    		start: 34.6,
		    		stop: 36.2,
		    		cups: [
		    			{value: 'b', start: 40.9},
		    			{value: 'c', start: 41.7},
		    			{value: 'd', start: 42.5},
		    			{value: 'e', start: 43.3},
		    			{value: 'f', start: 44.1},
		    			{value: 'g', start: 44.9},
		    			{value: 'h', start: 45.7, stop: 46.5}
		    		]
		    	},
			];
// assert: bands is sorted by start.

//mySize recommends Comexim size based on underbust and overbust measurements in inches
var mySize = function(underbust, overbust) {
	for (var i = 0; i < bands.length; i++) {
		var band = bands[i]    		
		if (underbust >= band.start && underbust < band.stop) {	
			for (var j = 0; j < band.cups.length; j++){
				var cup = band.cups[j]
				if (j+1  === band.cups.length){
					var cupMax = cup.stop
				}
				else {
					var cupMax = band.cups[j+1].start
				};	
				if (overbust >= cup.start && overbust < cupMax){
					return {band: band.value, cup: cup.value}
				}
				else {
					noSize = {band:band.value, cup:null}
				};
			}
			return noSize
		}
		else {
			noSize = {band:null, cup:null}
		}			
	}
	return noSize
};



$(document).ready(function(){	
	//Generates size information table
	var table = $('<table></table>');
	for(var i=0; i < bands.length; i++){
		var band = bands[i];
    	var row = $('<tr></tr>');
		for (var j=0; j < band.cups.length; j++) {
			var cup = band.cups[j];
			//determine cup.stop
			if (j+1 === band.cups.length){
				var cupStop = cup.stop;
			}
			else {
				var cupStop = band.cups[j+1].start;
			};
			//append cell content with exact cup measurements in a tooltip
			var cell = $('<td data-size="' + band.value.toString() + cup.value.toString() + '">' +band.value.toString() +cup.value.toString() +'<div class="tooltip">FITS:<br>' +band.start.toString() +'-' +band.stop.toString() + ' UNDERBUST<br>' +cup.start.toString() +'-' +cupStop.toString() +' OVERBUST</div></td>');
			row.append(cell);
		};
		//alternate .odd css class in rows
    	if (i%2 === 0) {
    		row.addClass('odd')
    	};
    	table.append(row);
	};
	//create size table
	$('#sizeTable').append(table);

	// Shows size suggestion based on user's measurements input "Size Calculator"
	function sizeSuggestion(){
	var under = $('#underbust').val()
	var over = $('#overbust').val()
	return mySize(under,over)
	};
	$('#calculateSize').click(function(){
		//remove highlights from table cells, if any
		$("#sizeTable td").removeClass('highlighted');
		//calculate suggestion
		var suggestion = sizeSuggestion();	
		if (sizeSuggestion().band === null) {
			$('#sizeSuggestion').text("Sorry, seems like we don't carry your size yet:(");
			return false;
		}; 
		if (sizeSuggestion().cup === null) {
			$('#sizeSuggestion').text("Your band is " +suggestion.band + ", but we don't carry your cup:(" );
			return false;
		}
		else {
			$('#sizeSuggestion').text("We recommend size " + suggestion.band.toString() + suggestion.cup.toString());
			//Highlight recommended size in a table
			var highlighted = suggestion.band.toString()+suggestion.cup.toString();
		    $('td[data-size="' + highlighted + '"]').addClass('highlighted');
			return false;
		};
	  });
});

    </script>

    <style type="text/css">
    table {
    	font-size: 12px;
    	
    }

	td {
		display: inline-block;
		cursor: pointer;
		text-align: center;
		padding: .5em; 
	}
    .odd {
    	background: rgba(200,90,150,.2);
    }

    .tooltip {
    	display: none;
    	position: absolute;
    	margin-left: 2.5em;
    	margin-top: -1.5em;
    	background: #fff;
    	color: rgba(200,90,150,1);
    	border: solid 1px rgba(200,90,150,.5);
    	text-align: left;    	
    	z-index: 1000;
    	padding: .5em;
    	border-radius: .5em;
    	font-weight: bold;
    	font-size: 10px;
    }
	#sizeTable td:hover {
		background: rgba(200,90,150,1);
		color: #fff;
	}

    #sizeTable td:hover .tooltip {
    	display: block;
    }

    #sizeTable td.highlighted {
    	background: green;
    	color: #fff;
    }


    </style>
</head>

<body>
	<section id="sizeCalculator">
		<form>
			<label>Underbust:</label><input type="number" id="underbust"  placeholder="eg. 34" step=".1" min="0" autofocus>
			<label>Overbust:</label><input type="number" id="overbust" name="overbust" placeholder="eg. 43" step=".1" min="0">
			<input type="submit" value="Show my size!" id="calculateSize">
			<br><br>
			<span id="sizeSuggestion"></span>
			<br><br>
		</form>
	</section>
	
	<div id="sizeTable">
		<h2>Available Sizes</h2>
		<small>Highlight a size to see exact measurements</small>
	</div>


<hr>
<!-- 	<table>
		<tr>
			<td class="odd">28B<div class="tooltip"></div></td>
			<td>28C<div class="tooltip"></div></td>
			<td class="odd">28D<div class="tooltip"></div></td>
			<td>28E<div class="tooltip"></div></td>								
			<td class="odd">28F<div class="tooltip"></div></td>
			<td>28G<div class="tooltip"></div></td>
			<td class="odd">28H<div class="tooltip"></div></td>
			<td>28HH<div class="tooltip"></div></td>								
			<td class="odd">28J<div class="tooltip"></div></td>
			<td>28K<div class="tooltip"></div></td>
			<td class="odd">28L<div class="tooltip"></div></td>
			<td>28M<div class="tooltip"></div></td>								
			<td class="odd">28N<div class="tooltip"></div></td>							
		</tr>
		<tr>
			<td class="odd">30B<div class="tooltip"></div></td>
			<td>30C<div class="tooltip"></div></td>
			<td class="odd">30D<div class="tooltip"></div></td>
			<td>30E<div class="tooltip"></div></td>
			<td class="odd">30F<div class="tooltip"></div></td>
			<td>30G<div class="tooltip"></div></td>
			<td class="odd">30H<div class="tooltip"></div></td>
			<td>30HH<div class="tooltip"></div></td>
			<td class="odd">30J<div class="tooltip"></div></td>
			<td>30K<div class="tooltip"></div></td>
			<td class="odd">30L<div class="tooltip"></div></td>
			<td>30M<div class="tooltip"></div></td>			
		</tr>
		<tr>
			<td class="odd">32B<div class="tooltip"></div></td>
			<td>32C<div class="tooltip"></div></td>
			<td class="odd">32D<div class="tooltip"></div></td>
			<td>32E<div class="tooltip"></div></td>
			<td class="odd">32F<div class="tooltip"></div></td>
			<td>32G<div class="tooltip"></div></td>
			<td class="odd">32H<div class="tooltip"></div></td>
			<td>32HH<div class="tooltip"></div></td>
			<td class="odd">32J<div class="tooltip"></div></td>
			<td>32K<div class="tooltip"></div></td>
			<td class="odd">32L<div class="tooltip"></div></td>			
		</tr>
		<tr>
			<td class="odd">34B<div class="tooltip"></div></td>
			<td>34C<div class="tooltip"></div></td>
			<td class="odd">34D<div class="tooltip"></div></td>
			<td>34E<div class="tooltip"></div></td>
			<td class="odd">34F<div class="tooltip"></div></td>
			<td>34G<div class="tooltip"></div></td>
			<td class="odd">34H<div class="tooltip"></div></td>
			<td>34HH<div class="tooltip"></div></td>
			<td class="odd">34J<div class="tooltip"></div></td>
			<td>34K<div class="tooltip"></div></td>			
		</tr>
		<tr>
			<td class="odd">36B<div class="tooltip"></div></td>
			<td>36C<div class="tooltip"></div></td>
			<td class="odd">36D<div class="tooltip"></div></td>
			<td>36E<div class="tooltip">36E Fits<br>30.7-32.3 UNDERBUST<br>39.4-40.2 OVERBUST</div></td>
			<td class="odd">36F<div class="tooltip"></div></td>
			<td>36G<div class="tooltip"></div></td>
			<td class="odd">36H<div class="tooltip"></div></td>
			<td>36HH<div class="tooltip"></div></td>
			<td class="odd">36J<div class="tooltip"></div></td>
		</tr>
		<tr>
			<td class="odd">38B<div class="tooltip"></div></td>
			<td>38C<div class="tooltip"></div></td>
			<td class="odd">38D<div class="tooltip"></div></td>
			<td>38E<div class="tooltip"></div></td>
			<td class="odd">38F<div class="tooltip"></div></td>
			<td>38G<div class="tooltip"></div></td>
			<td class="odd">38H<div class="tooltip"></div></td>
			<td>38HH<div class="tooltip"></div></td>
		</tr>
		<tr>
			<td class="odd">40B<div class="tooltip"></div></td>
			<td>40C<div class="tooltip"></div></td>
			<td class="odd">40D<div class="tooltip"></div></td>
			<td>40E<div class="tooltip"></div></td>
			<td class="odd">40F<div class="tooltip"></div></td>
			<td>40G<div class="tooltip"></div></td>
			<td class="odd">40H<div class="tooltip"></div></td>
		</tr>
	</table>
 -->


</body>

</html>